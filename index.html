<!DOCTYPE html>
<html>
<head>
  <title>Processing - Beacon - Bekk</title>
  <link rel="stylesheet" href="css/main.css">
  <script src="js/app.bekk.beacon.js"></script>
  <script src="js/processing.min.js"></script>
  <script src="https://sdk.amazonaws.com/js/aws-sdk-2.3.0.min.js"></script>
  <script src="https://code.jquery.com/jquery-2.2.2.min.js"></script>
  <script src="js/data.js"></script>
</head>
<body>

<canvas id="heatmap" data-processing-sources="bekk.beacon.pde"></canvas>

<script>
$(document).ready(function() {
	setTimeout(init, 1000);
});

var beaconData = [];
function setBeaconData(data) {
	console.log(data);
	beaconData = data.Items.slice(Math.max(data.Items.length - 10, 1))
}


function mockData() {
	beaconData.push({
		_Id: '42573645',
		beaconId: choose(['1111', '2222', '3333', '4444', '5555']),
		dist: Math.random()*40,
		timestamp: (new Date()).getTime()
	})
	if (beaconData.length > 100) beaconData.splice(0, 1);
}

function choose(choices) {
  	var index = Math.floor(Math.random() * choices.length);
	return choices[index];
}

setInterval(mockData, 10);
</script>

</body>
</html>
